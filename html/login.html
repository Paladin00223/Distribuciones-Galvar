<!DOCTYPE html>
<html lang="es">

    <head>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Iniciar Sesión - Distribuciones Galvar</title>
        <link rel="stylesheet" href="../css/login.css">

    </head>

    <body>

        <header>

            <h1>¡Que alegría tenerte de vuelta en Distribuciones Galvar!</h1>

        </header>

        <main>

            <h2>Recuerda iniciar sesión frecuentemente</h2>

            <div class="form-container">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="cedula">Número de cédula</label>
                        <input type="text" id="cedula" name="cedula" pattern="[0-9]{8,10}" title="Ingrese un número de cédula válido (8-10 dígitos)" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Contraseña</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit">Iniciar Sesión</button>

                    <div class="login-links">
                        <p>¿No tienes cuenta? <a href="register.html">Regístrate aquí</a></p>
                    </div>
                </form>
            </div>
        </main>

        <footer>
            <button class="contact-button"><i class="fab fa-whatsapp"></i> Contacto: 320 818 6026</button>
            <br>
            &copy; 26 mayo 2025 - Distribuciones Galvar. Todos los derechos reservados
        </footer>

        <script src="../js/login.js"></script>
        <script src="../js/contacto.js"></script>
        <script>
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const cedula = document.getElementById('cedula').value;
                const password = document.getElementById('password').value;

                // Validación de administrador
                if (cedula === 'jdvargas223@gmail.com' && password === 'JDv@rgA$223#') {
                    localStorage.setItem('usuario', JSON.stringify({
                        email: cedula,
                        nombre: 'Administrador',
                        esAdmin: true
                    }));
                    window.location.href = 'admin.html';
                    return;
                }

                // Obtener usuarios registrados
                const usuariosRegistrados = JSON.parse(localStorage.getItem('usuarios')) || [];
                
                // Buscar usuario por cédula
                const usuario = usuariosRegistrados.find(u => u.cedula === cedula);
                
                if (usuario && usuario.password === password) {
                    // Guardar información del usuario
                    localStorage.setItem('usuario', JSON.stringify({
                        ...usuario,
                        esAdmin: false
                    }));
                    window.location.href = 'index.html';
                } else {
                    alert('Cédula o contraseña incorrectos');
                }
            });
        </script>

        <style>
            .login-links {
                text-align: center;
                margin-top: 1rem;
            }

            .login-links a {
                color: #007bff;
                text-decoration: none;
            }

            .login-links a:hover {
                text-decoration: underline;
            }
        </style>

    </body>

</html>