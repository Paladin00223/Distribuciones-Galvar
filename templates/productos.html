<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Distribuciones Galvar</title>

    <!-- La ruta al CSS se resuelve a una ruta estática -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>

  <body>
    <nav>
      <div class="nav-buttons">
        <!-- Estos enlaces apuntarían a tus rutas de Flask -->
        <a href="#"
          ><button><i class="fas fa-shopping-cart"></i> Comprar</button></a
        >
      </div>
      <a href="#"
        ><button class="cerrar">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
        </button></a
      >
    </nav>
    <aside>
      <a href="#"
        ><button><i class="fas fa-shopping-bag"></i> Compras</button></a
      >
      <a href="#"
        ><button><i class="fas fa-user"></i> Perfil</button></a
      >
      <a href="#top"
        ><button><i class="fas fa-arrow-up"></i> Volver Al Inicio</button></a
      >
    </aside>
    <header>
      <section>
        <h1>
          ¡Aquí podrás encontrar toda clase de productos
          <!-- La variable {{ cuenta }} se reemplaza con datos reales -->
          <span id="nombre-usuario">Juan</span>!
        </h1>
      </section>

      <div>
        <h2>DISTRIBUCIONES GALVAR</h2>
      </div>
    </header>

    <main>
      <div class="search-box">
        <select id="categoria">
          <option value="todo">Todas las categorias</option>
          <option value="aseo">Aseo</option>
          <option value="cacharro">Cacharrería</option>
          <option value="cosmeticos">Cosméticos</option>
          <option value="descechable">Descechables</option>
          <option value="detalle">Detalles</option>
          <option value="ferreteria">Ferretería</option>
          <option value="hogar">Hogar</option>
          <option value="juego">Juegos</option>
          <option value="papeleria">Papelería</option>
        </select>

        <input type="search" id="buscar" placeholder="Buscar Producto" />
        <button type="button" onclick="aplicarFiltros()">
          <i class="fas fa-search"></i> Buscar
        </button>
      </div>

      <div class="search-container"></div>
      <section id="contenedor">
        
        {# Verificamos si la lista de productos no está vacía #}
        {% if productos %}
          {# Iteramos sobre cada producto que nos pasó Flask #}
          {% for producto in productos %}
          <article data-categoria="{{ producto.get('categoria_nombre', 'general') }}">
            {# Hacemos que la imagen y el título sean un enlace a la página de detalle del producto #}
            <a href="{{ url_for('producto', id=producto._id) }}" class="product-link">
              {# Asumo que cada producto tiene un campo 'imagen', 'nombre' y 'descripcion' #}
              <img src="{{ url_for('static', filename=producto.imagen) }}" alt="Imagen de {{ producto.nombre }}" />
              <h3>{{ producto.nombre }}</h3>
              <p>{{ producto.descripcion }}</p>
            </a>
            {# El resto de los controles para añadir al carrito #}
            <select class="precio">
              <option value="unidad">Unidad</option>
            </select>
            {# Asumo que cada producto tiene un campo 'valor' numérico #}
            <b>Valor: <span>{{ "%.3f"|format(producto.valor|float) }}</span></b
            ><br />
            <label for=""><b>Cantidad</b></label>
            <input
              name="cantidad"
              type="number"
              min="1"
              step="1"
              placeholder="Cantidad"
            />
            <br />
            <b>Total = <span>$0.00</span></b>
            <button>Añadir al carrito</button>
          </article>
          {% endfor %}
        {% else %}
          <p class="no-products-message">No se encontraron productos en esta categoría.</p>
        {% endif %}

      </section>
    </main>

    <footer>
      <h2 class="center">¡PRÓXIMAMENTE MÁS PRODUCTOS!</h2>
      <p class="maintenance-message">
        <i class="fas fa-tools"></i> ¡La fidelización por puntos aún está en
        mantenimiento!<br />
        ¡Muy Pronto!
      </p>
      <button class="contact-button">
        <i class="fab fa-whatsapp"></i> Contacto: 320 818 6026
      </button>
      <br />
      &copy; 26 mayo 2025 - Distribuciones Galvar. Todos los derechos reservados
    </footer>
  </body>
</html>
